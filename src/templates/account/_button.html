{% with base_color=base_color|default:"bg-blue" %}
    <button type="submit"
            class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
        <span class="flex items-center justify-center">
            <strong class="font-semibold text-white">
                {{ text }}
            </strong>
            <svg class="hidden w-5 h-5 ml-3 animate-spin" viewBox="0 0 24 24">
                <path className="opacity-25" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
        </span>
        <script>
            const script = document.currentScript;
            const button = script.parentElement;
            const form = button.closest("form");
            const loader = button.querySelector("svg");

            const toggle = () => {
            button.classList.toggle("{{ base_color }}-600");
            button.classList.toggle("hover:{{ base_color }}-700");
            button.classList.toggle("{{ base_color }}-300");
            button.classList.toggle("hover:{{ base_color }}-400");
            };

            form.addEventListener("submit", () => {
            console.debug("Button clicked");

            toggle();
            button.setAttribute("disabled", "");
            loader.classList.toggle("hidden");

            // Clear on timeout
            setTimeout(() => {
                toggle();
                button.removeAttribute("disabled");
                loader.classList.toggle("hidden");
            }, 3000);
            }, true);
        </script>
    </button>
{% endwith %}